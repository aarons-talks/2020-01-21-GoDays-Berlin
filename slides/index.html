<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>How to Safely and Efficiently Build your App with Modules</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>
						Modules & You
					</h1>
					
					<p>GoDays, January 22, 2020</p>
					<p>
						<a href="https://twitter.com/arschles">@arschles</a>
					</p>
					<aside class="notes">
						https://www.godays.io/conferenceday1
					</aside>
				</section>

				<section>
					<h2>How did we get here?</h2>
					
					<p class="fragment"><code>nil</code></p>
					<p class="fragment"><code>go get</code></p>
					<p class="fragment"><code>GO15VENDOREXPERIMENT</code></p>
					<p class="fragment"><code>glide</code>, <code>dep</code>, ...</p>
					<p class="fragment"><b><code>go get</code></b></p>
				</section>

				<section>
					<h2><code>go get</code> is brand new</h2>
				</section>

				<section>
					<h3>Aaron Schlesinger</h3>
					<p>
						<small>
							Sr. Cloud Developer Advocate, Microsoft
						</small>
					</p>
					<p>
						<small>
							Core maintainer & Creator, 
							<a href="https://docs.gomods.io">Athens</a>
						</small>
					</p>
					<p>
						<small>
							<a href="https://twitter.com/arschles">@arschles</a>
						</small>
					</p>
					<aside class="notes">
						We're going talk today about what modules are
						doing for you "under the hood" and how/when to
						use it
					</aside>
				</section>

				<section>
					<h2>"UX" stays (mostly) the same</h2>
					<p class="fragment">That was part of the goal</p>
					<p class="fragment">
						Biggest change: everything uses <code>go</code>
					</p>
				</section>
				
				<section>
					<h2>Behind the scenes</h2>
					<p class="fragment">
						<code>proxy.golang.org</code>
					</p>
					<p class="fragment">
						<small>
							(No more VCS downloads)
						</small>
					</p>
					<p class="fragment">
						<code>
							sum.golang.org
						</code>
					</p>

					<aside class="notes">
						All code comes from HTTP servers by default, so
						we have a brand new abstraction for the VCS
						origin. That gives us more reliable & faster
						builds.

						Also, all code is authenticated with a globally
						hosted checksum database.
					</aside>
				</section>

				<section>
					<h2>Your workflow won't change</h2>
					<h4 class="fragment">(mostly)</h4>
					<h3 class="fragment">But your builds will</h3>
					<aside class="notes">
						Specifically, a new abstraction brings new
						requirements.
					</aside>
				</section>

				<section>
					<h2>A basic build</h2>
					<h4 class="fragment">Your project with public dependencies</h4>

					<aside class="notes">
						Demo - see <code>basic-public/</code>

						<ul>
							<li>
								Introduce <code>go.mod</code>
								and <code>go.sum</code>
							</li>
							<li>
								Clear cache
							</li>
							<li>
								Show <code>GOPROXY</code>
							</li>
							<li>
								Build the app
							</li>
						</ul>
					</aside>
				</section>

				<section>
					<h2>
						A shared <code>vendor</code> folder?
					</h2>
					<aside class="notes">
						We centralized the vendor directory to 
						the cloud.

						In that demo, it's hosted by Google, but
						there are other hosts.

						Centralization is nice for our dependencies
						because we can control, audit, and secure
						without asking developers to do any more
						work.
					</aside>
				</section>

				<section>
					<h2>Your private code</h2>
					<p class="fragment">
						Don't send <code>proxy.golang.org</code> 
						private module names
					</p>
					<aside class="notes">
						Centralization comes with a gotcha.

						Public hosted servers don't hold
						your private code.

						... but it's easy (unfortunately) to ask
						the hosted servers for your private code

						... which tells them about the names of
						your private modules

						You have to remember to turn that off
					</aside>
				</section>

				<section>
					<h2>Using a private server</h2>
					<p class="fragment">
						Own your shared <code>vendor</code>
					</p>
					<aside class="notes">
						The best solution is to put a proxy
						between you and the public cloud.

						You get the same benefits and also
						control what gets fetched from upstream.

						We're going to use Athens for our 
						private server. This is the only 100%
						open source proxy implementation.
						
						You can run it yourself, and we have a
						great community if you run into issues.
					</aside>
				</section>

				<section>
					<h2>Things to remember</h2>
				</section>

				<section>
					<h2>
						A fundamental change
						<small>(under the hood)</small>
					</h2>
					<aside class="notes">
						Easily configurable

						Dangerous for private dependencies, by default
					</aside>
				</section>
				<section>
					<h2>Private code</h2>
					<aside class="notes">
						If you have more than a few developers,
						set up your own server (Athens, Artifactory)

						Make sure you turn on the private sum DB 
						proxy

						Make sure everyone has their
						<code>GOPROXY</code> pointed to it
					</aside>
				</section>
				<section>
					<h3>
						<a
							href="https://github.com/golang/go/wiki/Modules">
							https://github.com/golang/go/wiki/Modules
						</a>
					</h3>
				</section>
				<section>
					<p><code>@arschles</code></p>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>
	</body>
</html>
